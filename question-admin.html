<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë¬¸ì œ ê´€ë¦¬ ì‹œìŠ¤í…œ - êµìˆ˜ ì „ìš©</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .header {
            background: white;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            margin-bottom: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header h1 {
            color: #667eea;
            font-size: 2.5em;
        }

        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 10px;
            font-size: 1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-success {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            color: white;
        }

        .btn-danger {
            background: linear-gradient(135deg, #eb3349 0%, #f45c43 100%);
            color: white;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .panel {
            background: white;
            padding: 25px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            margin-bottom: 30px;
        }

        .panel h2 {
            color: #667eea;
            margin-bottom: 20px;
            font-size: 1.8em;
        }

        .questions-grid {
            display: grid;
            gap: 20px;
        }

        .question-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 15px;
            border-left: 5px solid #667eea;
            position: relative;
        }

        .question-card.disabled {
            opacity: 0.5;
            border-left-color: #999;
        }

        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 15px;
        }

        .question-id {
            background: #667eea;
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 0.9em;
            font-weight: bold;
        }

        .question-actions {
            display: flex;
            gap: 10px;
        }

        .action-btn {
            padding: 5px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9em;
            transition: all 0.3s;
        }

        .edit-btn {
            background: #ffc107;
            color: #000;
        }

        .delete-btn {
            background: #dc3545;
            color: white;
        }

        .toggle-btn {
            background: #28a745;
            color: white;
        }

        .question-text {
            font-size: 1.1em;
            color: #333;
            margin-bottom: 10px;
        }

        .question-meta {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            margin-top: 10px;
        }

        .meta-badge {
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 0.9em;
        }

        .difficulty-easy {
            background: #d4edda;
            color: #155724;
        }

        .difficulty-medium {
            background: #fff3cd;
            color: #856404;
        }

        .difficulty-hard {
            background: #f8d7da;
            color: #721c24;
        }

        .stats-badge {
            background: #e7f3ff;
            color: #004085;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            overflow-y: auto;
        }

        .modal.show {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 20px;
            max-width: 800px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #333;
        }

        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1em;
            font-family: inherit;
        }

        .form-group textarea {
            min-height: 100px;
            resize: vertical;
        }

        .form-actions {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
            margin-top: 20px;
        }

        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .tab {
            padding: 12px 25px;
            background: #f8f9fa;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1em;
            font-weight: bold;
            transition: all 0.3s;
        }

        .tab.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .keyword-input {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }

        .keyword-tag {
            display: inline-block;
            background: #667eea;
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            margin: 5px;
        }

        .keyword-tag button {
            background: none;
            border: none;
            color: white;
            margin-left: 5px;
            cursor: pointer;
            font-weight: bold;
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: #999;
            font-size: 1.2em;
        }

        .success-message {
            background: #d4edda;
            color: #155724;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            display: none;
        }

        .success-message.show {
            display: block;
        }

        .filter-controls {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }

        .filter-controls select {
            padding: 10px;
            border: 2px solid #667eea;
            border-radius: 8px;
            font-size: 1em;
        }

        .upload-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
        }

        .upload-btn {
            background: #667eea;
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1em;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div>
                <h1>ğŸ“ ë¬¸ì œ ê´€ë¦¬ ì‹œìŠ¤í…œ</h1>
                <p>ì‹¤ì‹œê°„ ë¬¸ì œ ì¶”ê°€/ìˆ˜ì •/ì‚­ì œ</p>
            </div>
            <div>
                <button class="btn btn-success" onclick="showAddModal()">â• ìƒˆ ë¬¸ì œ ì¶”ê°€</button>
                <button class="btn btn-primary" onclick="uploadAllQuestions()">ğŸ“¤ ê¸°ì¡´ ë¬¸ì œ ì¼ê´„ ì—…ë¡œë“œ</button>
            </div>
        </div>

        <div id="success-message" class="success-message"></div>

        <div class="panel">
            <h2>ğŸ“š ë¬¸ì œ ëª©ë¡</h2>
            
            <div class="filter-controls">
                <select id="category-filter" onchange="filterQuestions()">
                    <option value="">ì „ì²´ ì£¼ì œ</option>
                    <option value="datatypes">ìë£Œí˜•</option>
                    <option value="numpy">Numpy</option>
                    <option value="pandas">Pandas</option>
                    <option value="data_loading">ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸°</option>
                    <option value="operations">ì—°ì‚°</option>
                </select>
                
                <select id="difficulty-filter" onchange="filterQuestions()">
                    <option value="">ì „ì²´ ë‚œì´ë„</option>
                    <option value="easy">ì‰¬ì›€</option>
                    <option value="medium">ë³´í†µ</option>
                    <option value="hard">ì–´ë ¤ì›€</option>
                </select>

                <select id="status-filter" onchange="filterQuestions()">
                    <option value="">ì „ì²´ ìƒíƒœ</option>
                    <option value="enabled">í™œì„±í™”</option>
                    <option value="disabled">ë¹„í™œì„±í™”</option>
                </select>
            </div>

            <div class="tabs">
                <button class="tab active" onclick="switchTab('all')">ì „ì²´</button>
                <button class="tab" onclick="switchTab('datatypes')">ìë£Œí˜•</button>
                <button class="tab" onclick="switchTab('numpy')">Numpy</button>
                <button class="tab" onclick="switchTab('pandas')">Pandas</button>
                <button class="tab" onclick="switchTab('data_loading')">ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸°</button>
                <button class="tab" onclick="switchTab('operations')">ì—°ì‚°</button>
            </div>

            <div id="questions-list">
                <div class="loading">ë¬¸ì œë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>
            </div>
        </div>
    </div>

    <!-- ë¬¸ì œ ì¶”ê°€/ìˆ˜ì • ëª¨ë‹¬ -->
    <div id="question-modal" class="modal">
        <div class="modal-content">
            <h2 id="modal-title">ìƒˆ ë¬¸ì œ ì¶”ê°€</h2>
            
            <form id="question-form">
                <input type="hidden" id="edit-question-id">
                
                <div class="form-group">
                    <label>ì£¼ì œ *</label>
                    <select id="question-category" required>
                        <option value="datatypes">ìë£Œí˜•</option>
                        <option value="numpy">Numpy</option>
                        <option value="pandas">Pandas</option>
                        <option value="data_loading">ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸°</option>
                        <option value="operations">ì—°ì‚°</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>ë¬¸ì œ *</label>
                    <textarea id="question-text" required placeholder="ë¬¸ì œë¥¼ ì…ë ¥í•˜ì„¸ìš”..."></textarea>
                </div>

                <div class="form-group">
                    <label>ì˜ˆì œ ì½”ë“œ</label>
                    <textarea id="question-example" placeholder="ì˜ˆì œ ì½”ë“œë¥¼ ì…ë ¥í•˜ì„¸ìš”..."></textarea>
                </div>

                <div class="form-group">
                    <label>íŒíŠ¸</label>
                    <textarea id="question-hint" placeholder="íŒíŠ¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”..."></textarea>
                </div>

                <div class="form-group">
                    <label>ì˜ˆìƒ ì¶œë ¥ *</label>
                    <input type="text" id="question-output" required placeholder="ì˜ˆìƒ ì¶œë ¥ì„ ì…ë ¥í•˜ì„¸ìš”...">
                </div>

                <div class="form-group">
                    <label>ë‚œì´ë„ *</label>
                    <select id="question-difficulty" required>
                        <option value="easy">ì‰¬ì›€ (100ì )</option>
                        <option value="medium">ë³´í†µ (150ì )</option>
                        <option value="hard">ì–´ë ¤ì›€ (200ì )</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>í‚¤ì›Œë“œ (ì‰¼í‘œë¡œ êµ¬ë¶„)</label>
                    <input type="text" id="question-keywords" placeholder="ì˜ˆ: print, type, variable">
                    <div id="keywords-display"></div>
                </div>

                <div class="form-group">
                    <label>ìˆœì„œ</label>
                    <input type="number" id="question-order" value="1" min="1">
                </div>

                <div class="form-group">
                    <label>
                        <input type="checkbox" id="question-enabled" checked>
                        í™œì„±í™”
                    </label>
                </div>

                <div class="form-actions">
                    <button type="button" class="btn btn-danger" onclick="closeModal()">ì·¨ì†Œ</button>
                    <button type="submit" class="btn btn-success">ì €ì¥</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>

    <script>
        // âš ï¸ Firebase ì„¤ì • - ë‹¤ë¥¸ íŒŒì¼ë“¤ê³¼ ë™ì¼í•œ ì„¤ì • ì‚¬ìš©
        const firebaseConfig = {
              apiKey: "AIzaSyBHOBXMqpBDsDIMONQqWZ83qxIxhU0VyG8",
              authDomain: "python-learning-system.firebaseapp.com",
              databaseURL: "https://python-learning-system-default-rtdb.asia-southeast1.firebasedatabase.app",
              projectId: "python-learning-system",
              storageBucket: "python-learning-system.firebasestorage.app",
              messagingSenderId: "844754646343",
              appId: "1:844754646343:web:da76658dae2e91d6468862",
              measurementId: "G-9Q0JVVT0QB"
        };

        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();

        let allQuestions = {};
        let currentCategory = 'all';

        // ê¸°ì¡´ ë¬¸ì œ ë°ì´í„° (ì¼ê´„ ì—…ë¡œë“œìš©)
        const existingQuestions = {
            'datatypes': [
                {
                    question: 'ì •ìˆ˜í˜• ë³€ìˆ˜ xì— 100ì„ í• ë‹¹í•˜ê³ , ë³€ìˆ˜ì˜ íƒ€ì…ì„ ì¶œë ¥í•˜ì„¸ìš”.',
                    example: 'x = 10\nprint(type(x))  # <class \'int\'>',
                    hint: 'type() í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ë³€ìˆ˜ì˜ íƒ€ì…ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
                    expectedOutput: "<class 'int'>",
                    keywords: ['x', '=', '100', 'print', 'type', '(x)'],
                    difficulty: 'easy'
                },
                {
                    question: 'ë¦¬ìŠ¤íŠ¸ [1, 2, 3, 4, 5]ë¥¼ ìƒì„±í•˜ê³ , ë¦¬ìŠ¤íŠ¸ì˜ ê¸¸ì´ë¥¼ ì¶œë ¥í•˜ì„¸ìš”.',
                    example: 'my_list = [10, 20, 30]\nprint(len(my_list))  # 3',
                    hint: 'len() í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ë¦¬ìŠ¤íŠ¸ì˜ ê¸¸ì´ë¥¼ êµ¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
                    expectedOutput: '5',
                    keywords: ['[', '1', '2', '3', '4', '5', ']', 'len', 'print'],
                    difficulty: 'easy'
                }
            ],
            'numpy': [
                {
                    question: 'numpyë¥¼ importí•˜ê³ , [1, 2, 3, 4, 5]ë¡œ ë°°ì—´ì„ ìƒì„±í•œ í›„ ë°°ì—´ì˜ í•©ì„ ì¶œë ¥í•˜ì„¸ìš”.',
                    example: 'import numpy as np\narr = np.array([10, 20, 30])\nprint(np.sum(arr))  # 60',
                    hint: 'np.sum() í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ë°°ì—´ì˜ í•©ì„ êµ¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
                    expectedOutput: '15',
                    keywords: ['import', 'numpy', 'np', 'array', 'sum', 'print'],
                    difficulty: 'medium'
                }
            ],
            'pandas': [
                {
                    question: 'pandasë¥¼ importí•˜ê³ , [10, 20, 30]ìœ¼ë¡œ Seriesë¥¼ ìƒì„±í•œ í›„ ì¶œë ¥í•˜ì„¸ìš”.',
                    example: 'import pandas as pd\ns = pd.Series([1, 2, 3])\nprint(s)',
                    hint: 'pd.Series()ë¥¼ ì‚¬ìš©í•˜ì—¬ ì‹œë¦¬ì¦ˆë¥¼ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
                    expectedOutput: '0    10\n1    20\n2    30',
                    keywords: ['import', 'pandas', 'pd', 'Series', '[10, 20, 30]', 'print'],
                    difficulty: 'medium'
                }
            ],
            'data_loading': [
                {
                    question: 'pandasë¥¼ importí•˜ê³ , CSV íŒŒì¼ "data.csv"ë¥¼ ì½ì–´ì„œ df ë³€ìˆ˜ì— ì €ì¥í•œ í›„, ìƒìœ„ 5ê°œ í–‰ì„ ì¶œë ¥í•˜ì„¸ìš”.',
                    example: 'import pandas as pd\ndf = pd.read_csv("file.csv")\nprint(df.head())',
                    hint: 'pd.read_csv()ë¡œ CSV íŒŒì¼ì„ ì½ê³ , .head()ë¡œ ìƒìœ„ í–‰ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
                    expectedOutput: 'DataFrameì˜ ìƒìœ„ 5ê°œ í–‰',
                    keywords: ['import', 'pandas', 'pd', 'read_csv', 'data.csv', 'df', 'head', 'print'],
                    difficulty: 'medium'
                }
            ],
            'operations': [
                {
                    question: '5 + 3 * 2ì˜ ê²°ê³¼ë¥¼ ì¶œë ¥í•˜ì„¸ìš”.',
                    example: 'print(2 + 3)  # 5',
                    hint: 'ì—°ì‚°ì ìš°ì„ ìˆœìœ„ë¥¼ ê³ ë ¤í•˜ì„¸ìš”. ê³±ì…ˆì´ ë¨¼ì € ê³„ì‚°ë©ë‹ˆë‹¤.',
                    expectedOutput: '11',
                    keywords: ['5', '+', '3', '*', '2', 'print'],
                    difficulty: 'easy'
                }
            ]
        };

        // ì‹¤ì‹œê°„ ë¬¸ì œ ë¡œë“œ
        database.ref('questions').on('value', (snapshot) => {
            allQuestions = snapshot.val() || {};
            displayQuestions();
        });

        // ë¬¸ì œ í‘œì‹œ
        function displayQuestions() {
            const container = document.getElementById('questions-list');
            
            if (Object.keys(allQuestions).length === 0) {
                container.innerHTML = '<div class="loading">ë“±ë¡ëœ ë¬¸ì œê°€ ì—†ìŠµë‹ˆë‹¤.</div>';
                return;
            }

            let html = '<div class="questions-grid">';

            Object.keys(allQuestions).forEach(category => {
                if (currentCategory !== 'all' && currentCategory !== category) return;

                Object.keys(allQuestions[category]).forEach(qId => {
                    const q = allQuestions[category][qId];
                    const difficultyClass = `difficulty-${q.difficulty}`;
                    const disabledClass = q.enabled ? '' : 'disabled';
                    const points = q.points || (q.difficulty === 'easy' ? 100 : q.difficulty === 'medium' ? 150 : 200);

                    html += `
                        <div class="question-card ${disabledClass}">
                            <div class="question-header">
                                <span class="question-id">${qId}</span>
                                <div class="question-actions">
                                    <button class="action-btn toggle-btn" onclick="toggleQuestion('${category}', '${qId}')">
                                        ${q.enabled ? 'ë¹„í™œì„±í™”' : 'í™œì„±í™”'}
                                    </button>
                                    <button class="action-btn edit-btn" onclick="editQuestion('${category}', '${qId}')">ìˆ˜ì •</button>
                                    <button class="action-btn delete-btn" onclick="deleteQuestion('${category}', '${qId}')">ì‚­ì œ</button>
                                </div>
                            </div>
                            <div class="question-text">${q.question}</div>
                            <div class="question-meta">
                                <span class="meta-badge ${difficultyClass}">
                                    ${q.difficulty === 'easy' ? 'ì‰¬ì›€' : q.difficulty === 'medium' ? 'ë³´í†µ' : 'ì–´ë ¤ì›€'}
                                </span>
                                <span class="meta-badge stats-badge">${points}ì </span>
                                <span class="meta-badge stats-badge">ìˆœì„œ: ${q.order}</span>
                                <span class="meta-badge stats-badge">${category}</span>
                            </div>
                        </div>
                    `;
                });
            });

            html += '</div>';
            container.innerHTML = html;
        }

        // íƒ­ ì „í™˜
        function switchTab(category) {
            currentCategory = category;
            
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            event.target.classList.add('active');
            
            displayQuestions();
        }

        // í•„í„°ë§
        function filterQuestions() {
            // êµ¬í˜„ ìƒëµ (ê°„ë‹¨íˆ íƒ­ ì‚¬ìš©)
            displayQuestions();
        }

        // ëª¨ë‹¬ í‘œì‹œ
        function showAddModal() {
            document.getElementById('modal-title').textContent = 'ìƒˆ ë¬¸ì œ ì¶”ê°€';
            document.getElementById('question-form').reset();
            document.getElementById('edit-question-id').value = '';
            document.getElementById('question-modal').classList.add('show');
        }

        // ëª¨ë‹¬ ë‹«ê¸°
        function closeModal() {
            document.getElementById('question-modal').classList.remove('show');
        }

        // ë¬¸ì œ ì €ì¥
        document.getElementById('question-form').onsubmit = function(e) {
            e.preventDefault();
            
            const category = document.getElementById('question-category').value;
            const editId = document.getElementById('edit-question-id').value;
            const qId = editId || generateQuestionId(category);
            
            const questionData = {
                id: qId,
                question: document.getElementById('question-text').value,
                example: document.getElementById('question-example').value,
                hint: document.getElementById('question-hint').value,
                expectedOutput: document.getElementById('question-output').value,
                keywords: document.getElementById('question-keywords').value.split(',').map(k => k.trim()),
                difficulty: document.getElementById('question-difficulty').value,
                points: document.getElementById('question-difficulty').value === 'easy' ? 100 : 
                       document.getElementById('question-difficulty').value === 'medium' ? 150 : 200,
                order: parseInt(document.getElementById('question-order').value),
                enabled: document.getElementById('question-enabled').checked,
                category: category,
                createdAt: Date.now(),
                updatedAt: Date.now()
            };

            database.ref(`questions/${category}/${qId}`).set(questionData)
                .then(() => {
                    showSuccess(editId ? 'ë¬¸ì œê°€ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤!' : 'ë¬¸ì œê°€ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤!');
                    closeModal();
                })
                .catch(error => {
                    alert('ì˜¤ë¥˜: ' + error.message);
                });
        };

        // ë¬¸ì œ ID ìƒì„±
        function generateQuestionId(category) {
            const prefix = category.substring(0, 1).toUpperCase();
            const timestamp = Date.now().toString().slice(-6);
            return `${prefix}${timestamp}`;
        }

        // ë¬¸ì œ ìˆ˜ì •
        function editQuestion(category, qId) {
            const q = allQuestions[category][qId];
            
            document.getElementById('modal-title').textContent = 'ë¬¸ì œ ìˆ˜ì •';
            document.getElementById('edit-question-id').value = qId;
            document.getElementById('question-category').value = category;
            document.getElementById('question-text').value = q.question;
            document.getElementById('question-example').value = q.example || '';
            document.getElementById('question-hint').value = q.hint || '';
            document.getElementById('question-output').value = q.expectedOutput;
            document.getElementById('question-keywords').value = (q.keywords || []).join(', ');
            document.getElementById('question-difficulty').value = q.difficulty;
            document.getElementById('question-order').value = q.order || 1;
            document.getElementById('question-enabled').checked = q.enabled !== false;
            
            document.getElementById('question-modal').classList.add('show');
        }

        // ë¬¸ì œ ì‚­ì œ
        function deleteQuestion(category, qId) {
            if (!confirm('ì •ë§ ì´ ë¬¸ì œë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) return;
            
            database.ref(`questions/${category}/${qId}`).remove()
                .then(() => {
                    showSuccess('ë¬¸ì œê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤!');
                })
                .catch(error => {
                    alert('ì˜¤ë¥˜: ' + error.message);
                });
        }

        // ë¬¸ì œ í™œì„±í™”/ë¹„í™œì„±í™”
        function toggleQuestion(category, qId) {
            const q = allQuestions[category][qId];
            const newStatus = !q.enabled;
            
            database.ref(`questions/${category}/${qId}/enabled`).set(newStatus)
                .then(() => {
                    showSuccess(newStatus ? 'ë¬¸ì œê°€ í™œì„±í™”ë˜ì—ˆìŠµë‹ˆë‹¤!' : 'ë¬¸ì œê°€ ë¹„í™œì„±í™”ë˜ì—ˆìŠµë‹ˆë‹¤!');
                });
        }

        // ê¸°ì¡´ ë¬¸ì œ ì¼ê´„ ì—…ë¡œë“œ
        function uploadAllQuestions() {
            if (!confirm('ê¸°ì¡´ 25ê°œ ë¬¸ì œë¥¼ Firebaseì— ì—…ë¡œë“œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) return;
            
            let count = 0;
            Object.keys(existingQuestions).forEach(category => {
                existingQuestions[category].forEach((q, index) => {
                    const qId = `Q${category.substring(0, 3).toUpperCase()}${String(index + 1).padStart(3, '0')}`;
                    
                    database.ref(`questions/${category}/${qId}`).set({
                        id: qId,
                        question: q.question,
                        example: q.example,
                        hint: q.hint,
                        expectedOutput: q.expectedOutput,
                        keywords: q.keywords,
                        difficulty: q.difficulty,
                        points: q.difficulty === 'easy' ? 100 : q.difficulty === 'medium' ? 150 : 200,
                        order: index + 1,
                        enabled: true,
                        category: category,
                        createdAt: Date.now()
                    }).then(() => {
                        count++;
                        if (count === Object.values(existingQuestions).flat().length) {
                            showSuccess('ëª¨ë“  ë¬¸ì œê°€ ì—…ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤!');
                        }
                    });
                });
            });
        }

        // ì„±ê³µ ë©”ì‹œì§€
        function showSuccess(message) {
            const el = document.getElementById('success-message');
            el.textContent = message;
            el.classList.add('show');
            setTimeout(() => {
                el.classList.remove('show');
            }, 3000);
        }
    </script>
</body>
</html>
