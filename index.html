<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Python ì¸í„°ë™í‹°ë¸Œ í•™ìŠµ ì‹œìŠ¤í…œ ğŸ</title>
<style>
* {
margin: 0;
padding: 0;
box-sizing: border-box;
}

```
    body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        padding: 20px;
    }

    .container {
        max-width: 1200px;
        margin: 0 auto;
    }

    .header {
        background: white;
        padding: 30px;
        border-radius: 20px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        margin-bottom: 30px;
        text-align: center;
    }

    .header h1 {
        color: #667eea;
        font-size: 2.5em;
        margin-bottom: 10px;
    }

    .header p {
        color: #666;
        font-size: 1.2em;
    }

    .firebase-badge {
        display: inline-block;
        background: linear-gradient(135deg, #FFA000 0%, #FF6F00 100%);
        color: white;
        padding: 8px 16px;
        border-radius: 20px;
        font-size: 0.9em;
        margin-top: 10px;
        animation: pulse 2s infinite;
    }

    @keyframes pulse {
        0%, 100% { transform: scale(1); }
        50% { transform: scale(1.05); }
    }

    .stats {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 20px;
        margin-bottom: 30px;
    }

    .stat-card {
        background: white;
        padding: 20px;
        border-radius: 15px;
        box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        text-align: center;
        transition: transform 0.3s;
    }

    .stat-card:hover {
        transform: translateY(-5px);
    }

    .stat-number {
        font-size: 2.5em;
        font-weight: bold;
        color: #667eea;
        display: block;
    }

    .stat-label {
        color: #666;
        font-size: 1em;
        margin-top: 5px;
    }

    .main-content {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 30px;
    }

    @media (max-width: 968px) {
        .main-content {
            grid-template-columns: 1fr;
        }
    }

    .panel {
        background: white;
        padding: 25px;
        border-radius: 20px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.2);
    }

    .panel h2 {
        color: #667eea;
        margin-bottom: 20px;
        font-size: 1.8em;
    }

    .topic-buttons {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 10px;
        margin-bottom: 20px;
    }

    .topic-btn {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        border: none;
        padding: 15px 20px;
        border-radius: 10px;
        font-size: 1em;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.3s;
    }

    .topic-btn:hover {
        transform: scale(1.05);
        box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
    }

    .topic-btn.active {
        background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
    }

    .question-card {
        background: #f8f9fa;
        padding: 20px;
        border-radius: 15px;
        margin-bottom: 20px;
        border-left: 5px solid #667eea;
    }

    .question-text {
        font-size: 1.2em;
        color: #333;
        margin-bottom: 15px;
        font-weight: 500;
    }

    .code-editor {
        background: #282c34;
        color: #abb2bf;
        padding: 20px;
        border-radius: 10px;
        font-family: 'Courier New', monospace;
        font-size: 14px;
        min-height: 150px;
        margin-bottom: 15px;
        overflow-x: auto;
        white-space: pre;
        line-height: 1.5;
    }

    textarea.code-input {
        width: 100%;
        min-height: 200px;
        background: #282c34;
        color: #abb2bf;
        border: 2px solid #667eea;
        border-radius: 10px;
        padding: 15px;
        font-family: 'Courier New', monospace;
        font-size: 14px;
        resize: vertical;
        line-height: 1.5;
    }

    .output-box {
        background: #1e1e1e;
        color: #4ec9b0;
        padding: 15px;
        border-radius: 10px;
        font-family: 'Courier New', monospace;
        font-size: 14px;
        min-height: 100px;
        margin-top: 15px;
        white-space: pre-wrap;
        word-wrap: break-word;
        line-height: 1.5;
    }

    .button-group {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
        margin-top: 15px;
    }

    .btn {
        padding: 12px 30px;
        border: none;
        border-radius: 10px;
        font-size: 1em;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.3s;
    }

    .btn-primary {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
    }

    .btn-success {
        background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
        color: white;
    }

    .btn-warning {
        background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        color: white;
    }

    .btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(0,0,0,0.2);
    }

    .hint-box {
        background: #fff3cd;
        border: 2px solid #ffc107;
        padding: 15px;
        border-radius: 10px;
        margin-top: 15px;
        display: none;
    }

    .hint-box.show {
        display: block;
    }

    .feedback {
        padding: 15px;
        border-radius: 10px;
        margin-top: 15px;
        font-weight: bold;
        display: none;
        animation: slideIn 0.3s;
    }

    @keyframes slideIn {
        from {
            opacity: 0;
            transform: translateY(-10px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .feedback.show {
        display: block;
    }

    .feedback.success {
        background: #d4edda;
        color: #155724;
        border: 2px solid #28a745;
    }

    .feedback.error {
        background: #f8d7da;
        color: #721c24;
        border: 2px solid #dc3545;
    }

    .progress-bar {
        width: 100%;
        height: 30px;
        background: #e9ecef;
        border-radius: 15px;
        overflow: hidden;
        margin-bottom: 20px;
    }

    .progress-fill {
        height: 100%;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        transition: width 0.5s;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-weight: bold;
    }

    .achievement-popup {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%) scale(0);
        background: white;
        padding: 40px;
        border-radius: 20px;
        box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        text-align: center;
        z-index: 1000;
        transition: transform 0.3s;
    }

    .achievement-popup.show {
        transform: translate(-50%, -50%) scale(1);
    }

    .achievement-icon {
        font-size: 5em;
        margin-bottom: 20px;
    }

    .overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0,0,0,0.5);
        display: none;
        z-index: 999;
    }

    .overlay.show {
        display: block;
    }

    .difficulty-badge {
        display: inline-block;
        padding: 5px 10px;
        border-radius: 5px;
        font-size: 0.9em;
        margin-left: 10px;
    }

    .difficulty-easy {
        background: #d4edda;
        color: #155724;
    }

    .difficulty-medium {
        background: #fff3cd;
        color: #856404;
    }

    .difficulty-hard {
        background: #f8d7da;
        color: #721c24;
    }

    .student-info {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 20px;
        border-radius: 15px;
        margin-bottom: 20px;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .student-name {
        font-size: 1.5em;
        font-weight: bold;
    }

    .student-id {
        font-size: 0.9em;
        opacity: 0.9;
    }

    .name-input-modal {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: white;
        padding: 40px;
        border-radius: 20px;
        box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        z-index: 1001;
        text-align: center;
        display: none;
    }

    .name-input-modal.show {
        display: block;
    }

    .name-input-modal input {
        width: 100%;
        padding: 15px;
        font-size: 1.2em;
        border: 2px solid #667eea;
        border-radius: 10px;
        margin: 20px 0;
    }

    .sync-status {
        display: inline-block;
        padding: 5px 10px;
        border-radius: 15px;
        font-size: 0.8em;
        margin-left: 10px;
    }

    .sync-status.synced {
        background: #d4edda;
        color: #155724;
    }

    .sync-status.syncing {
        background: #fff3cd;
        color: #856404;
    }
</style>

```

</head>
<body>
<div class="container">
<div class="header">
<h1>ğŸ Python ì¸í„°ë™í‹°ë¸Œ í•™ìŠµ ì‹œìŠ¤í…œ</h1>
<p>ì½”ë“œë¥¼ ì‘ì„±í•˜ê³ , ì‹¤í–‰í•˜ê³ , ë§ˆìŠ¤í„°í•˜ì„¸ìš”!</p>
<span class="firebase-badge">ğŸ”¥ Firebase ì‹¤ì‹œê°„ ë™ê¸°í™”</span>
</div>

```
    <div class="student-info">
        <div>
            <div class="student-name" id="student-name">í™˜ì˜í•©ë‹ˆë‹¤!</div>
            <div class="student-id" id="student-id">í•™ë²ˆ: ë¯¸ë“±ë¡</div>
        </div>
        <div>
            <span class="sync-status synced" id="sync-status">âœ“ ë™ê¸°í™”ë¨</span>
            <button class="btn btn-warning" onclick="changeStudentInfo()" style="margin-left: 10px;">ğŸ‘¤ ì •ë³´ ìˆ˜ì •</button>
        </div>
    </div>

    <div class="stats">
        <div class="stat-card">
            <span class="stat-number" id="score">0</span>
            <span class="stat-label">ì ìˆ˜</span>
        </div>
        <div class="stat-card">
            <span class="stat-number" id="solved">0</span>
            <span class="stat-label">í•´ê²°í•œ ë¬¸ì œ</span>
        </div>
        <div class="stat-card">
            <span class="stat-number" id="streak">0</span>
            <span class="stat-label">ì—°ì† ì •ë‹µ</span>
        </div>
        <div class="stat-card">
            <span class="stat-number" id="level">1</span>
            <span class="stat-label">ë ˆë²¨</span>
        </div>
    </div>

    <div class="progress-bar">
        <div class="progress-fill" id="progress" style="width: 0%">0%</div>
    </div>

    <div class="main-content">
        <div class="panel">
            <h2>ğŸ“š í•™ìŠµ ì£¼ì œ ì„ íƒ</h2>
            <div class="topic-buttons">
                <button class="topic-btn active" onclick="loadTopic('datatypes')">ìë£Œí˜•</button>
                <button class="topic-btn" onclick="loadTopic('numpy')">Numpy</button>
                <button class="topic-btn" onclick="loadTopic('pandas')">Pandas</button>
                <button class="topic-btn" onclick="loadTopic('data_loading')">ğŸ“‚ ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸°</button>
                <button class="topic-btn" onclick="loadTopic('operations')">ì—°ì‚°</button>
            </div>

            <div class="question-card">
                <div class="question-text" id="question">ë¬¸ì œë¥¼ ë¡œë”© ì¤‘...</div>
                <div class="code-editor" id="example-code"></div>
            </div>

            <div class="button-group">
                <button class="btn btn-warning" onclick="showHint()">ğŸ’¡ íŒíŠ¸</button>
                <button class="btn btn-success" onclick="nextQuestion()">ë‹¤ìŒ ë¬¸ì œ â¡ï¸</button>
            </div>

            <div class="hint-box" id="hint"></div>
        </div>

        <div class="panel">
            <h2>ğŸ’» ì½”ë“œ ì‘ì„± ê³µê°„</h2>
            <textarea class="code-input" id="code-input" placeholder="ì—¬ê¸°ì— Python ì½”ë“œë¥¼ ì‘ì„±í•˜ì„¸ìš”..."></textarea>

            <div class="button-group">
                <button class="btn btn-success" onclick="checkAnswer()">âœ… ì •ë‹µ í™•ì¸</button>
                <button class="btn btn-primary" onclick="clearCode()">ğŸ—‘ï¸ ì½”ë“œ ì§€ìš°ê¸°</button>
            </div>

            <div class="feedback" id="feedback"></div>

            <h3 style="margin-top: 20px; color: #667eea;">ğŸ’¡ ì˜ˆìƒ ì¶œë ¥:</h3>
            <div class="output-box" id="expected-output">ì •ë‹µì„ í™•ì¸í•˜ë©´ ì˜ˆìƒ ì¶œë ¥ì´ í‘œì‹œë©ë‹ˆë‹¤...</div>
        </div>
    </div>
</div>

<!-- í•™ìƒ ì •ë³´ ì…ë ¥ ëª¨ë‹¬ -->
<div class="overlay" id="name-overlay"></div>
<div class="name-input-modal" id="name-modal">
    <h2>ğŸ‘‹ í™˜ì˜í•©ë‹ˆë‹¤!</h2>
    <p>í•™ìŠµì„ ì‹œì‘í•˜ê¸° ì „ì— ì •ë³´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.</p>
    <input type="text" id="name-input" placeholder="ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: ê¹€ì² ìˆ˜)">
    <input type="text" id="id-input" placeholder="í•™ë²ˆì„ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: 20241234)">
    <button class="btn btn-primary" onclick="saveStudentInfo()">ì‹œì‘í•˜ê¸°</button>
</div>

<div class="overlay" id="overlay" onclick="closeAchievement()"></div>
<div class="achievement-popup" id="achievement">
    <div class="achievement-icon">ğŸ†</div>
    <h2 id="achievement-text">ì¶•í•˜í•©ë‹ˆë‹¤!</h2>
    <p id="achievement-desc"></p>
    <button class="btn btn-primary" onclick="closeAchievement()">í™•ì¸</button>
</div>

<!-- Firebase SDK -->
<script src="<https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js>"></script>
<script src="<https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js>"></script>

<script>
    // âš ï¸ Firebase ì„¤ì • - ì—¬ê¸°ì— Firebase Consoleì—ì„œ ë°›ì€ ì„¤ì •ì„ ë¶™ì—¬ë„£ìœ¼ì„¸ìš”!
    const firebaseConfig = {
        apiKey: "AIzaSyC-xxxxxxxxxxxxxxxxxxxxxxxxxxx",
				authDomain: "[python-learning-system.firebaseapp.com](http://python-learning-system.firebaseapp.com/)",
				databaseURL: "[https://python-learning-system-default-rtdb.firebaseio.com](https://python-learning-system-default-rtdb.firebaseio.com/)",
				projectId: "python-learning-system",
				storageBucket: "[python-learning-system.appspot.com](http://python-learning-system.appspot.com/)",
				messagingSenderId: "123456789012",
				appId: "1:123456789012:web:abcdef1234567890abcdef"
    };

    // Firebase ì´ˆê¸°í™”
    firebase.initializeApp(firebaseConfig);
    const database = firebase.database();

    // ë¬¸ì œ ë°ì´í„°ë² ì´ìŠ¤ (ì´ì „ê³¼ ë™ì¼)
    const questions = {
        'datatypes': [
            {
                question: 'ì •ìˆ˜í˜• ë³€ìˆ˜ xì— 100ì„ í• ë‹¹í•˜ê³ , ë³€ìˆ˜ì˜ íƒ€ì…ì„ ì¶œë ¥í•˜ì„¸ìš”.',
                example: 'x = 10\\nprint(type(x))  # <class \\'int\\'>',
                hint: 'type() í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ë³€ìˆ˜ì˜ íƒ€ì…ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
                expectedOutput: "<class 'int'>",
                keywords: ['x', '=', '100', 'print', 'type', '(x)'],
                difficulty: 'easy'
            },
            {
                question: 'ë¦¬ìŠ¤íŠ¸ [1, 2, 3, 4, 5]ë¥¼ ìƒì„±í•˜ê³ , ë¦¬ìŠ¤íŠ¸ì˜ ê¸¸ì´ë¥¼ ì¶œë ¥í•˜ì„¸ìš”.',
                example: 'my_list = [10, 20, 30]\\nprint(len(my_list))  # 3',
                hint: 'len() í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ë¦¬ìŠ¤íŠ¸ì˜ ê¸¸ì´ë¥¼ êµ¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
                expectedOutput: '5',
                keywords: ['[', '1', '2', '3', '4', '5', ']', 'len', 'print'],
                difficulty: 'easy'
            }
        ],
        'numpy': [
            {
                question: 'numpyë¥¼ importí•˜ê³ , [1, 2, 3, 4, 5]ë¡œ ë°°ì—´ì„ ìƒì„±í•œ í›„ ë°°ì—´ì˜ í•©ì„ ì¶œë ¥í•˜ì„¸ìš”.',
                example: 'import numpy as np\\narr = np.array([10, 20, 30])\\nprint(np.sum(arr))  # 60',
                hint: 'np.sum() í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ë°°ì—´ì˜ í•©ì„ êµ¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
                expectedOutput: '15',
                keywords: ['import', 'numpy', 'np', 'array', 'sum', 'print'],
                difficulty: 'medium'
            }
        ],
        'pandas': [
            {
                question: 'pandasë¥¼ importí•˜ê³ , [10, 20, 30]ìœ¼ë¡œ Seriesë¥¼ ìƒì„±í•œ í›„ ì¶œë ¥í•˜ì„¸ìš”.',
                example: 'import pandas as pd\\ns = pd.Series([1, 2, 3])\\nprint(s)',
                hint: 'pd.Series()ë¥¼ ì‚¬ìš©í•˜ì—¬ ì‹œë¦¬ì¦ˆë¥¼ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
                expectedOutput: '0    10\\n1    20\\n2    30',
                keywords: ['import', 'pandas', 'pd', 'Series', '[10, 20, 30]', 'print'],
                difficulty: 'medium'
            }
        ],
        'data_loading': [
            {
                question: 'pandasë¥¼ importí•˜ê³ , CSV íŒŒì¼ "data.csv"ë¥¼ ì½ì–´ì„œ df ë³€ìˆ˜ì— ì €ì¥í•œ í›„, ìƒìœ„ 5ê°œ í–‰ì„ ì¶œë ¥í•˜ì„¸ìš”.',
                example: 'import pandas as pd\\ndf = pd.read_csv("file.csv")\\nprint(df.head())',
                hint: 'pd.read_csv()ë¡œ CSV íŒŒì¼ì„ ì½ê³ , .head()ë¡œ ìƒìœ„ í–‰ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
                expectedOutput: 'DataFrameì˜ ìƒìœ„ 5ê°œ í–‰',
                keywords: ['import', 'pandas', 'pd', 'read_csv', 'data.csv', 'df', 'head', 'print'],
                difficulty: 'medium'
            }
        ],
        'operations': [
            {
                question: '5 + 3 * 2ì˜ ê²°ê³¼ë¥¼ ì¶œë ¥í•˜ì„¸ìš”.',
                example: 'print(2 + 3)  # 5',
                hint: 'ì—°ì‚°ì ìš°ì„ ìˆœìœ„ë¥¼ ê³ ë ¤í•˜ì„¸ìš”. ê³±ì…ˆì´ ë¨¼ì € ê³„ì‚°ë©ë‹ˆë‹¤.',
                expectedOutput: '11',
                keywords: ['5', '+', '3', '*', '2', 'print'],
                difficulty: 'easy'
            }
        ]
    };

    // ê²Œì„ ìƒíƒœ
    let gameState = {
        currentTopic: 'datatypes',
        currentQuestion: 0,
        score: 0,
        solved: 0,
        streak: 0,
        level: 1,
        totalQuestions: 0,
        studentName: '',
        studentId: '',
        studentKey: ''
    };

    // ì´ ë¬¸ì œ ìˆ˜ ê³„ì‚°
    function calculateTotalQuestions() {
        let total = 0;
        for (let topic in questions) {
            total += questions[topic].length;
        }
        return total;
    }

    gameState.totalQuestions = calculateTotalQuestions();

    // Firebaseì— ë°ì´í„° ì €ì¥
    function syncToFirebase() {
        if (!gameState.studentKey) return;

        const syncStatus = document.getElementById('sync-status');
        syncStatus.textContent = 'â³ ë™ê¸°í™” ì¤‘...';
        syncStatus.className = 'sync-status syncing';

        const studentData = {
            name: gameState.studentName,
            studentId: gameState.studentId,
            score: gameState.score,
            solved: gameState.solved,
            streak: gameState.streak,
            level: gameState.level,
            progress: (gameState.solved / gameState.totalQuestions) * 100,
            lastActive: firebase.database.ServerValue.TIMESTAMP,
            currentTopic: gameState.currentTopic,
            currentQuestion: gameState.currentQuestion
        };

        database.ref('students/' + gameState.studentKey).set(studentData)
            .then(() => {
                syncStatus.textContent = 'âœ“ ë™ê¸°í™”ë¨';
                syncStatus.className = 'sync-status synced';
            })
            .catch((error) => {
                console.error('Firebase sync error:', error);
                syncStatus.textContent = 'âš ï¸ ë™ê¸°í™” ì‹¤íŒ¨';
            });
    }

    // í•™ìŠµ í™œë™ ê¸°ë¡
    function logActivity(activity, details) {
        if (!gameState.studentKey) return;

        const activityLog = {
            studentKey: gameState.studentKey,
            studentName: gameState.studentName,
            studentId: gameState.studentId,
            activity: activity,
            details: details,
            timestamp: firebase.database.ServerValue.TIMESTAMP
        };

        database.ref('activities').push(activityLog);
    }

    // í†µê³„ ì—…ë°ì´íŠ¸
    function updateStats() {
        document.getElementById('score').textContent = gameState.score;
        document.getElementById('solved').textContent = gameState.solved;
        document.getElementById('streak').textContent = gameState.streak;
        document.getElementById('level').textContent = gameState.level;

        const progress = (gameState.solved / gameState.totalQuestions) * 100;
        const progressBar = document.getElementById('progress');
        progressBar.style.width = progress + '%';
        progressBar.textContent = Math.round(progress) + '%';

        // Firebase ë™ê¸°í™”
        syncToFirebase();
    }

    // í•™ìƒ ì •ë³´ ì €ì¥
    function saveStudentInfo() {
        const name = document.getElementById('name-input').value.trim();
        const id = document.getElementById('id-input').value.trim();

        if (!name || !id) {
            alert('ì´ë¦„ê³¼ í•™ë²ˆì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”!');
            return;
        }

        gameState.studentName = name;
        gameState.studentId = id;
        gameState.studentKey = id.replace(/[^a-zA-Z0-9]/g, ''); // Firebase í‚¤ë¡œ ì‚¬ìš© ê°€ëŠ¥í•˜ê²Œ ë³€í™˜

        updateStudentDisplay();
        closeNameModal();

        // Firebaseì— ì €ì¥
        syncToFirebase();
        logActivity('login', 'Student logged in');

        showAchievement('ë“±ë¡ ì™„ë£Œ! ğŸ‰', `${name}ë‹˜, í•™ìŠµì„ ì‹œì‘í•©ë‹ˆë‹¤!`);
    }

    // í•™ìƒ ì •ë³´ í‘œì‹œ ì—…ë°ì´íŠ¸
    function updateStudentDisplay() {
        document.getElementById('student-name').textContent = gameState.studentName || 'í™˜ì˜í•©ë‹ˆë‹¤!';
        document.getElementById('student-id').textContent = gameState.studentId ? `í•™ë²ˆ: ${gameState.studentId}` : 'í•™ë²ˆ: ë¯¸ë“±ë¡';
    }

    // í•™ìƒ ì •ë³´ ë³€ê²½
    function changeStudentInfo() {
        document.getElementById('name-input').value = gameState.studentName || '';
        document.getElementById('id-input').value = gameState.studentId || '';
        document.getElementById('name-modal').classList.add('show');
        document.getElementById('name-overlay').classList.add('show');
    }

    // ì´ë¦„ ëª¨ë‹¬ ë‹«ê¸°
    function closeNameModal() {
        document.getElementById('name-modal').classList.remove('show');
        document.getElementById('name-overlay').classList.remove('show');
    }

    // ì´ë¦„ ëª¨ë‹¬ í‘œì‹œ
    function showNameModal() {
        document.getElementById('name-modal').classList.add('show');
        document.getElementById('name-overlay').classList.add('show');
    }

    // ì£¼ì œ ë¡œë“œ
    function loadTopic(topic) {
        gameState.currentTopic = topic;
        gameState.currentQuestion = 0;

        document.querySelectorAll('.topic-btn').forEach(btn => {
            btn.classList.remove('active');
        });

        event.target.classList.add('active');

        loadQuestion();
        logActivity('topic_change', `Changed to ${topic}`);
    }

    // ë¬¸ì œ ë¡œë“œ
    function loadQuestion() {
        const topic = gameState.currentTopic;
        const qIndex = gameState.currentQuestion;

        if (qIndex >= questions[topic].length) {
            gameState.currentQuestion = 0;
            loadQuestion();
            return;
        }

        const q = questions[topic][qIndex];

        const difficultyBadge = `<span class="difficulty-badge difficulty-${q.difficulty}">${q.difficulty === 'easy' ? 'ì‰¬ì›€' : q.difficulty === 'medium' ? 'ë³´í†µ' : 'ì–´ë ¤ì›€'}</span>`;

        document.getElementById('question').innerHTML = q.question + difficultyBadge;
        document.getElementById('example-code').textContent = q.example;
        document.getElementById('hint').textContent = q.hint;
        document.getElementById('hint').classList.remove('show');
        document.getElementById('feedback').classList.remove('show');
        document.getElementById('expected-output').textContent = 'ì •ë‹µì„ í™•ì¸í•˜ë©´ ì˜ˆìƒ ì¶œë ¥ì´ í‘œì‹œë©ë‹ˆë‹¤...';

        syncToFirebase();
    }

    // íŒíŠ¸ í‘œì‹œ
    function showHint() {
        document.getElementById('hint').classList.add('show');
        logActivity('hint_used', `Topic: ${gameState.currentTopic}, Question: ${gameState.currentQuestion}`);
    }

    // ë‹¤ìŒ ë¬¸ì œ
    function nextQuestion() {
        gameState.currentQuestion++;
        loadQuestion();
    }

    // ì½”ë“œ ì§€ìš°ê¸°
    function clearCode() {
        if (confirm('ì‘ì„±í•œ ì½”ë“œë¥¼ ëª¨ë‘ ì§€ìš°ì‹œê² ìŠµë‹ˆê¹Œ?')) {
            document.getElementById('code-input').value = '';
        }
    }

    // ì •ë‹µ í™•ì¸
    function checkAnswer() {
        const code = document.getElementById('code-input').value.trim();

        if (!code) {
            alert('ì½”ë“œë¥¼ ì‘ì„±í•´ì£¼ì„¸ìš”!');
            return;
        }

        const topic = gameState.currentTopic;
        const qIndex = gameState.currentQuestion;
        const q = questions[topic][qIndex];

        let keywordsFound = 0;
        q.keywords.forEach(keyword => {
            if (code.includes(keyword)) {
                keywordsFound++;
            }
        });

        const keywordRatio = keywordsFound / q.keywords.length;

        let points = 100;
        if (q.difficulty === 'medium') points = 150;
        if (q.difficulty === 'hard') points = 200;

        const feedback = document.getElementById('feedback');
        const expectedOutput = document.getElementById('expected-output');

        if (keywordRatio >= 0.7) {
            gameState.score += points;
            gameState.solved++;
            gameState.streak++;

            if (gameState.score >= gameState.level * 500) {
                gameState.level++;
                showAchievement('ë ˆë²¨ì—…! ğŸ‰', `ë ˆë²¨ ${gameState.level}ì— ë„ë‹¬í–ˆìŠµë‹ˆë‹¤!`);
            }

            feedback.textContent = `âœ… ì •ë‹µì…ë‹ˆë‹¤! +${points}ì  (ì—°ì† ${gameState.streak}ë¬¸ì œ)`;
            feedback.className = 'feedback success show';
            expectedOutput.textContent = `ì˜ˆìƒ ì¶œë ¥:\\n${q.expectedOutput}`;
            expectedOutput.style.color = '#4ec9b0';

            updateStats();
            logActivity('question_solved', `Topic: ${topic}, Question: ${qIndex}, Points: ${points}`);

            setTimeout(nextQuestion, 3000);
        } else {
            gameState.streak = 0;
            feedback.textContent = `âŒ ë‹¤ì‹œ ì‹œë„í•´ë³´ì„¸ìš”! í•„ìš”í•œ ì½”ë“œ: ${Math.round(keywordRatio * 100)}% / 70%\\nğŸ’¡ íŒíŠ¸ ë²„íŠ¼ì„ ëˆŒëŸ¬ë³´ì„¸ìš”!`;
            feedback.className = 'feedback error show';

            updateStats();
            logActivity('question_failed', `Topic: ${topic}, Question: ${qIndex}`);
        }
    }

    // ì„±ì·¨ íŒì—… í‘œì‹œ
    function showAchievement(title, desc) {
        document.getElementById('achievement-text').textContent = title;
        document.getElementById('achievement-desc').textContent = desc;
        document.getElementById('achievement').classList.add('show');
        document.getElementById('overlay').classList.add('show');
    }

    // ì„±ì·¨ íŒì—… ë‹«ê¸°
    function closeAchievement() {
        document.getElementById('achievement').classList.remove('show');
        document.getElementById('overlay').classList.remove('show');
    }

    // ì´ˆê¸°í™”
    window.onload = function() {
        setTimeout(() => {
            showNameModal();
        }, 500);

        loadQuestion();
        updateStats();
    };
</script>

```

</body>
</html>