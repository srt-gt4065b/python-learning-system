<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Python ì¸í„°ë™í‹°ë¸Œ í•™ìŠµ ì‹œìŠ¤í…œ ğŸ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            background: white;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            margin-bottom: 30px;
            text-align: center;
        }

        .header h1 {
            color: #667eea;
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            color: #666;
            font-size: 1.2em;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            text-align: center;
            transition: transform 0.3s;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-number {
            font-size: 2.5em;
            font-weight: bold;
            color: #667eea;
            display: block;
        }

        .stat-label {
            color: #666;
            font-size: 1em;
            margin-top: 5px;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }

        @media (max-width: 968px) {
            .main-content {
                grid-template-columns: 1fr;
            }
        }

        .panel {
            background: white;
            padding: 25px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .panel h2 {
            color: #667eea;
            margin-bottom: 20px;
            font-size: 1.8em;
        }

        .topic-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
            margin-bottom: 20px;
        }

        .topic-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 20px;
            border-radius: 10px;
            font-size: 1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .topic-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .topic-btn.active {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }

        .question-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            border-left: 5px solid #667eea;
        }

        .question-text {
            font-size: 1.2em;
            color: #333;
            margin-bottom: 15px;
            font-weight: 500;
        }

        .code-editor {
            background: #282c34;
            color: #abb2bf;
            padding: 20px;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            min-height: 150px;
            margin-bottom: 15px;
            overflow-x: auto;
            white-space: pre;
            line-height: 1.5;
        }

        textarea.code-input {
            width: 100%;
            min-height: 200px;
            background: #282c34;
            color: #abb2bf;
            border: 2px solid #667eea;
            border-radius: 10px;
            padding: 15px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            resize: vertical;
            line-height: 1.5;
        }

        .output-box {
            background: #1e1e1e;
            color: #4ec9b0;
            padding: 15px;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            min-height: 100px;
            margin-top: 15px;
            white-space: pre-wrap;
            word-wrap: break-word;
            line-height: 1.5;
        }

        .button-group {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-top: 15px;
        }

        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 10px;
            font-size: 1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-success {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            color: white;
        }

        .btn-warning {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .hint-box {
            background: #fff3cd;
            border: 2px solid #ffc107;
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
            display: none;
        }

        .hint-box.show {
            display: block;
        }

        .feedback {
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
            font-weight: bold;
            display: none;
            animation: slideIn 0.3s;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .feedback.show {
            display: block;
        }

        .feedback.success {
            background: #d4edda;
            color: #155724;
            border: 2px solid #28a745;
        }

        .feedback.error {
            background: #f8d7da;
            color: #721c24;
            border: 2px solid #dc3545;
        }

        .progress-bar {
            width: 100%;
            height: 30px;
            background: #e9ecef;
            border-radius: 15px;
            overflow: hidden;
            margin-bottom: 20px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            transition: width 0.5s;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        .achievement-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            background: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            text-align: center;
            z-index: 1000;
            transition: transform 0.3s;
        }

        .achievement-popup.show {
            transform: translate(-50%, -50%) scale(1);
        }

        .achievement-icon {
            font-size: 5em;
            margin-bottom: 20px;
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            display: none;
            z-index: 999;
        }

        .overlay.show {
            display: block;
        }

        .difficulty-badge {
            display: inline-block;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 0.9em;
            margin-left: 10px;
        }

        .difficulty-easy {
            background: #d4edda;
            color: #155724;
        }

        .difficulty-medium {
            background: #fff3cd;
            color: #856404;
        }

        .difficulty-hard {
            background: #f8d7da;
            color: #721c24;
        }

        .history-panel {
            background: white;
            padding: 25px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            margin-top: 30px;
        }

        .history-item {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-left: 4px solid #667eea;
        }

        .history-item.solved {
            border-left-color: #28a745;
        }

        .history-date {
            color: #666;
            font-size: 0.9em;
        }

        .reset-btn {
            background: linear-gradient(135deg, #f5576c 0%, #f093fb 100%);
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: bold;
            margin-top: 15px;
        }

        .reset-btn:hover {
            transform: scale(1.05);
        }

        .student-info {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .student-name {
            font-size: 1.5em;
            font-weight: bold;
        }

        .student-id {
            font-size: 0.9em;
            opacity: 0.9;
        }

        .name-input-modal {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            z-index: 1001;
            text-align: center;
            display: none;
        }

        .name-input-modal.show {
            display: block;
        }

        .name-input-modal input {
            width: 100%;
            padding: 15px;
            font-size: 1.2em;
            border: 2px solid #667eea;
            border-radius: 10px;
            margin: 20px 0;
        }

        .chart-container {
            margin-top: 20px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 15px;
        }

        .progress-detail {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .topic-progress {
            background: white;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }

        .topic-progress-bar {
            width: 100%;
            height: 10px;
            background: #e9ecef;
            border-radius: 5px;
            overflow: hidden;
            margin-top: 10px;
        }

        .topic-progress-fill {
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            transition: width 0.5s;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ Python ì¸í„°ë™í‹°ë¸Œ í•™ìŠµ ì‹œìŠ¤í…œ</h1>
            <p>ì½”ë“œë¥¼ ì‘ì„±í•˜ê³ , ì‹¤í–‰í•˜ê³ , ë§ˆìŠ¤í„°í•˜ì„¸ìš”!</p>
        </div>

        <div class="student-info">
            <div>
                <div class="student-name" id="student-name">í™˜ì˜í•©ë‹ˆë‹¤!</div>
                <div class="student-id" id="student-id">í•™ë²ˆ: ë¯¸ë“±ë¡</div>
            </div>
            <button class="btn btn-warning" onclick="changeStudentInfo()">ğŸ‘¤ ì •ë³´ ìˆ˜ì •</button>
        </div>

        <div class="stats">
            <div class="stat-card">
                <span class="stat-number" id="score">0</span>
                <span class="stat-label">ì ìˆ˜</span>
            </div>
            <div class="stat-card">
                <span class="stat-number" id="solved">0</span>
                <span class="stat-label">í•´ê²°í•œ ë¬¸ì œ</span>
            </div>
            <div class="stat-card">
                <span class="stat-number" id="streak">0</span>
                <span class="stat-label">ì—°ì† ì •ë‹µ</span>
            </div>
            <div class="stat-card">
                <span class="stat-number" id="level">1</span>
                <span class="stat-label">ë ˆë²¨</span>
            </div>
        </div>

        <div class="progress-bar">
            <div class="progress-fill" id="progress" style="width: 0%">0%</div>
        </div>

        <div class="main-content">
            <div class="panel">
                <h2>ğŸ“š í•™ìŠµ ì£¼ì œ ì„ íƒ</h2>
                <div class="topic-buttons">
                    <button class="topic-btn active" onclick="loadTopic('datatypes')">ìë£Œí˜•</button>
                    <button class="topic-btn" onclick="loadTopic('numpy')">Numpy</button>
                    <button class="topic-btn" onclick="loadTopic('pandas')">Pandas</button>
                    <button class="topic-btn" onclick="loadTopic('data_loading')">ğŸ“‚ ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸°</button>
                    <button class="topic-btn" onclick="loadTopic('operations')">ì—°ì‚°</button>
                </div>

                <div class="question-card">
                    <div class="question-text" id="question">ë¬¸ì œë¥¼ ë¡œë”© ì¤‘...</div>
                    <div class="code-editor" id="example-code"></div>
                </div>

                <div class="button-group">
                    <button class="btn btn-warning" onclick="showHint()">ğŸ’¡ íŒíŠ¸</button>
                    <button class="btn btn-success" onclick="nextQuestion()">ë‹¤ìŒ ë¬¸ì œ â¡ï¸</button>
                </div>

                <div class="hint-box" id="hint"></div>
            </div>

            <div class="panel">
                <h2>ğŸ’» ì½”ë“œ ì‘ì„± ê³µê°„</h2>
                <textarea class="code-input" id="code-input" placeholder="ì—¬ê¸°ì— Python ì½”ë“œë¥¼ ì‘ì„±í•˜ì„¸ìš”...&#10;&#10;ì˜ˆì‹œ:&#10;x = 100&#10;print(type(x))"></textarea>
                
                <div class="button-group">
                    <button class="btn btn-success" onclick="checkAnswer()">âœ… ì •ë‹µ í™•ì¸</button>
                    <button class="btn btn-primary" onclick="clearCode()">ğŸ—‘ï¸ ì½”ë“œ ì§€ìš°ê¸°</button>
                </div>

                <div class="feedback" id="feedback"></div>

                <h3 style="margin-top: 20px; color: #667eea;">ğŸ’¡ ì˜ˆìƒ ì¶œë ¥:</h3>
                <div class="output-box" id="expected-output">ì •ë‹µì„ í™•ì¸í•˜ë©´ ì˜ˆìƒ ì¶œë ¥ì´ í‘œì‹œë©ë‹ˆë‹¤...</div>
            </div>
        </div>

        <div class="history-panel">
            <h2>ğŸ“Š í•™ìŠµ ì§„í–‰ ìƒí™©</h2>
            
            <div class="chart-container">
                <h3>ì£¼ì œë³„ ì§„í–‰ë¥ </h3>
                <div class="progress-detail" id="topic-progress"></div>
            </div>

            <div style="margin-top: 30px;">
                <h3>ğŸ“ ìµœê·¼ í•™ìŠµ ê¸°ë¡ (ìµœê·¼ 10ê°œ)</h3>
                <div id="history-list"></div>
            </div>

            <button class="reset-btn" onclick="resetProgress()">ğŸ”„ ì§„í–‰ ìƒí™© ì´ˆê¸°í™”</button>
        </div>
    </div>

    <!-- í•™ìƒ ì •ë³´ ì…ë ¥ ëª¨ë‹¬ -->
    <div class="overlay" id="name-overlay"></div>
    <div class="name-input-modal" id="name-modal">
        <h2>ğŸ‘‹ í™˜ì˜í•©ë‹ˆë‹¤!</h2>
        <p>í•™ìŠµì„ ì‹œì‘í•˜ê¸° ì „ì— ì •ë³´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.</p>
        <input type="text" id="name-input" placeholder="ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: ê¹€ì² ìˆ˜)">
        <input type="text" id="id-input" placeholder="í•™ë²ˆì„ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: 20241234)">
        <button class="btn btn-primary" onclick="saveStudentInfo()">ì‹œì‘í•˜ê¸°</button>
    </div>

    <div class="overlay" id="overlay" onclick="closeAchievement()"></div>
    <div class="achievement-popup" id="achievement">
        <div class="achievement-icon">ğŸ†</div>
        <h2 id="achievement-text">ì¶•í•˜í•©ë‹ˆë‹¤!</h2>
        <p id="achievement-desc"></p>
        <button class="btn btn-primary" onclick="closeAchievement()">í™•ì¸</button>
    </div>

    <script>
        // ë¬¸ì œ ë°ì´í„°ë² ì´ìŠ¤
        const questions = {
            'datatypes': [
                {
                    question: 'ì •ìˆ˜í˜• ë³€ìˆ˜ xì— 100ì„ í• ë‹¹í•˜ê³ , ë³€ìˆ˜ì˜ íƒ€ì…ì„ ì¶œë ¥í•˜ì„¸ìš”.',
                    example: 'x = 10\nprint(type(x))  # <class \'int\'>',
                    hint: 'type() í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ë³€ìˆ˜ì˜ íƒ€ì…ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
                    expectedOutput: "<class 'int'>",
                    keywords: ['x', '=', '100', 'print', 'type', '(x)'],
                    difficulty: 'easy'
                },
                {
                    question: 'ë¦¬ìŠ¤íŠ¸ [1, 2, 3, 4, 5]ë¥¼ ìƒì„±í•˜ê³ , ë¦¬ìŠ¤íŠ¸ì˜ ê¸¸ì´ë¥¼ ì¶œë ¥í•˜ì„¸ìš”.',
                    example: 'my_list = [10, 20, 30]\nprint(len(my_list))  # 3',
                    hint: 'len() í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ë¦¬ìŠ¤íŠ¸ì˜ ê¸¸ì´ë¥¼ êµ¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
                    expectedOutput: '5',
                    keywords: ['[', '1', '2', '3', '4', '5', ']', 'len', 'print'],
                    difficulty: 'easy'
                },
                {
                    question: 'ë”•ì…”ë„ˆë¦¬ë¥¼ ìƒì„±í•˜ì—¬ "ì´ë¦„": "ê¹€êµìˆ˜", "ì§ì—…": "êµìˆ˜"ë¥¼ ì €ì¥í•˜ê³ , "ì´ë¦„" ê°’ì„ ì¶œë ¥í•˜ì„¸ìš”.',
                    example: 'person = {"ì´ë¦„": "í™ê¸¸ë™", "ë‚˜ì´": 25}\nprint(person["ì´ë¦„"])',
                    hint: 'ë”•ì…”ë„ˆë¦¬ëŠ” {í‚¤: ê°’} í˜•íƒœë¡œ ìƒì„±í•˜ê³ , ë”•ì…”ë„ˆë¦¬[í‚¤]ë¡œ ê°’ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.',
                    expectedOutput: 'ê¹€êµìˆ˜',
                    keywords: ['{', 'ì´ë¦„', 'ê¹€êµìˆ˜', 'ì§ì—…', 'êµìˆ˜', '}', 'print'],
                    difficulty: 'medium'
                },
                {
                    question: 'ë¬¸ìì—´ "Python"ì˜ ê¸¸ì´ë¥¼ êµ¬í•˜ê³  ì¶œë ¥í•˜ì„¸ìš”.',
                    example: 'text = "Hello"\nprint(len(text))  # 5',
                    hint: 'len() í•¨ìˆ˜ëŠ” ë¬¸ìì—´ì˜ ê¸¸ì´ë„ êµ¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
                    expectedOutput: '6',
                    keywords: ['Python', 'len', 'print'],
                    difficulty: 'easy'
                },
                {
                    question: 'Trueì™€ Falseì˜ ë…¼ë¦¬ê³±(and) ì—°ì‚° ê²°ê³¼ë¥¼ ì¶œë ¥í•˜ì„¸ìš”.',
                    example: 'print(True or False)  # True',
                    hint: 'and ì—°ì‚°ìë¥¼ ì‚¬ìš©í•˜ì„¸ìš”. True and Falseì˜ ê²°ê³¼ëŠ”?',
                    expectedOutput: 'False',
                    keywords: ['True', 'and', 'False', 'print'],
                    difficulty: 'easy'
                },
                {
                    question: 'íŠœí”Œ (10, 20, 30)ì„ ìƒì„±í•˜ê³ , ë‘ ë²ˆì§¸ ìš”ì†Œë¥¼ ì¶œë ¥í•˜ì„¸ìš”.',
                    example: 'my_tuple = (1, 2, 3)\nprint(my_tuple[1])  # 2',
                    hint: 'íŠœí”Œì€ ()ë¡œ ìƒì„±í•˜ê³ , ì¸ë±ìŠ¤ëŠ” 0ë¶€í„° ì‹œì‘í•©ë‹ˆë‹¤.',
                    expectedOutput: '20',
                    keywords: ['(', '10', '20', '30', ')', '[1]', 'print'],
                    difficulty: 'easy'
                }
            ],
            'numpy': [
                {
                    question: 'numpyë¥¼ importí•˜ê³ , [1, 2, 3, 4, 5]ë¡œ ë°°ì—´ì„ ìƒì„±í•œ í›„ ë°°ì—´ì˜ í•©ì„ ì¶œë ¥í•˜ì„¸ìš”.',
                    example: 'import numpy as np\narr = np.array([10, 20, 30])\nprint(np.sum(arr))  # 60',
                    hint: 'np.sum() í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ë°°ì—´ì˜ í•©ì„ êµ¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
                    expectedOutput: '15',
                    keywords: ['import', 'numpy', 'np', 'array', 'sum', 'print'],
                    difficulty: 'medium'
                },
                {
                    question: 'numpy ë°°ì—´ [[1, 2], [3, 4]]ë¥¼ ìƒì„±í•˜ê³ , ë°°ì—´ì˜ shapeì„ ì¶œë ¥í•˜ì„¸ìš”.',
                    example: 'import numpy as np\narr = np.array([[1, 2, 3]])\nprint(arr.shape)  # (1, 3)',
                    hint: '.shape ì†ì„±ì„ ì‚¬ìš©í•˜ë©´ ë°°ì—´ì˜ í˜•íƒœë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
                    expectedOutput: '(2, 2)',
                    keywords: ['import', 'numpy', 'array', '[[', ']]', 'shape', 'print'],
                    difficulty: 'medium'
                },
                {
                    question: 'numpyë¡œ 0ë¶€í„° 9ê¹Œì§€ì˜ ë°°ì—´ì„ ìƒì„±í•˜ê³ , í‰ê· ì„ ì¶œë ¥í•˜ì„¸ìš”.',
                    example: 'import numpy as np\narr = np.arange(5)\nprint(np.mean(arr))  # 2.0',
                    hint: 'np.arange()ë¡œ ë°°ì—´ì„ ë§Œë“¤ê³ , np.mean()ìœ¼ë¡œ í‰ê· ì„ êµ¬í•˜ì„¸ìš”.',
                    expectedOutput: '4.5',
                    keywords: ['import', 'numpy', 'arange', '10', 'mean', 'print'],
                    difficulty: 'medium'
                },
                {
                    question: 'numpy ë°°ì—´ [1, 2, 3, 4, 5]ì˜ ìµœëŒ“ê°’ì„ ì¶œë ¥í•˜ì„¸ìš”.',
                    example: 'import numpy as np\narr = np.array([10, 5, 8])\nprint(np.max(arr))  # 10',
                    hint: 'np.max() í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.',
                    expectedOutput: '5',
                    keywords: ['import', 'numpy', 'array', 'max', 'print'],
                    difficulty: 'easy'
                }
            ],
            'pandas': [
                {
                    question: 'pandasë¥¼ importí•˜ê³ , [10, 20, 30]ìœ¼ë¡œ Seriesë¥¼ ìƒì„±í•œ í›„ ì¶œë ¥í•˜ì„¸ìš”.',
                    example: 'import pandas as pd\ns = pd.Series([1, 2, 3])\nprint(s)',
                    hint: 'pd.Series()ë¥¼ ì‚¬ìš©í•˜ì—¬ ì‹œë¦¬ì¦ˆë¥¼ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
                    expectedOutput: '0    10\n1    20\n2    30',
                    keywords: ['import', 'pandas', 'pd', 'Series', '[10, 20, 30]', 'print'],
                    difficulty: 'medium'
                },
                {
                    question: 'DataFrameì„ ìƒì„±í•˜ì„¸ìš”. ì—´: "ì´ë¦„"=["ì² ìˆ˜", "ì˜í¬"], "ì ìˆ˜"=[85, 90]. ê·¸ë¦¬ê³  DataFrameì„ ì¶œë ¥í•˜ì„¸ìš”.',
                    example: 'import pandas as pd\ndata = {"A": [1, 2], "B": [3, 4]}\ndf = pd.DataFrame(data)\nprint(df)',
                    hint: 'ë”•ì…”ë„ˆë¦¬ë¥¼ pd.DataFrame()ì— ì „ë‹¬í•˜ì—¬ ìƒì„±í•©ë‹ˆë‹¤.',
                    expectedOutput: 'ì² ìˆ˜',
                    keywords: ['import', 'pandas', 'DataFrame', 'ì´ë¦„', 'ì² ìˆ˜', 'ì˜í¬', 'ì ìˆ˜', '85', '90', 'print'],
                    difficulty: 'hard'
                },
                {
                    question: 'pandasë¥¼ importí•˜ê³ , {"A": [1, 2, 3], "B": [4, 5, 6]} ë”•ì…”ë„ˆë¦¬ë¡œ DataFrameì„ ë§Œë“  í›„ "A" ì—´ë§Œ ì¶œë ¥í•˜ì„¸ìš”.',
                    example: 'import pandas as pd\ndf = pd.DataFrame({"X": [10, 20]})\nprint(df["X"])',
                    hint: 'df["ì—´ì´ë¦„"]ìœ¼ë¡œ íŠ¹ì • ì—´ì„ ì„ íƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
                    expectedOutput: '0    1\n1    2\n2    3',
                    keywords: ['import', 'pandas', 'DataFrame', '"A"', 'print'],
                    difficulty: 'medium'
                }
            ],
            'data_loading': [
                {
                    question: 'pandasë¥¼ importí•˜ê³ , CSV íŒŒì¼ "data.csv"ë¥¼ ì½ì–´ì„œ df ë³€ìˆ˜ì— ì €ì¥í•œ í›„, ìƒìœ„ 5ê°œ í–‰ì„ ì¶œë ¥í•˜ì„¸ìš”.',
                    example: 'import pandas as pd\ndf = pd.read_csv("file.csv")\nprint(df.head())',
                    hint: 'pd.read_csv()ë¡œ CSV íŒŒì¼ì„ ì½ê³ , .head()ë¡œ ìƒìœ„ í–‰ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
                    expectedOutput: 'DataFrameì˜ ìƒìœ„ 5ê°œ í–‰',
                    keywords: ['import', 'pandas', 'pd', 'read_csv', 'data.csv', 'df', 'head', 'print'],
                    difficulty: 'medium'
                },
                {
                    question: 'Excel íŒŒì¼ "sales.xlsx"ë¥¼ ì½ì–´ì„œ ë°ì´í„°í”„ë ˆì„ìœ¼ë¡œ ì €ì¥í•˜ê³ , ë°ì´í„°ì˜ shapeì„ ì¶œë ¥í•˜ì„¸ìš”.',
                    example: 'import pandas as pd\ndf = pd.read_excel("file.xlsx")\nprint(df.shape)',
                    hint: 'pd.read_excel()ë¡œ ì—‘ì…€ íŒŒì¼ì„ ì½ê³ , .shapeìœ¼ë¡œ í–‰ê³¼ ì—´ì˜ ê°œìˆ˜ë¥¼ í™•ì¸í•©ë‹ˆë‹¤.',
                    expectedOutput: '(í–‰ ê°œìˆ˜, ì—´ ê°œìˆ˜)',
                    keywords: ['import', 'pandas', 'read_excel', 'sales.xlsx', 'shape', 'print'],
                    difficulty: 'medium'
                },
                {
                    question: 'DataFrame dfì—ì„œ "quality" ì—´ì˜ ê°’ì´ 7 ì´ìƒì¸ ë°ì´í„°ë§Œ ì„ íƒí•˜ì—¬ high_quality ë³€ìˆ˜ì— ì €ì¥í•˜ê³  ì¶œë ¥í•˜ì„¸ìš”.',
                    example: 'high = df[df["score"] >= 80]\nprint(high)',
                    hint: 'df[ì¡°ê±´]ì„ ì‚¬ìš©í•˜ì—¬ ì¡°ê±´ì— ë§ëŠ” í–‰ì„ ì„ íƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
                    expectedOutput: 'quality >= 7ì¸ ë°ì´í„°',
                    keywords: ['df', '[', 'quality', '>=', '7', ']', 'high_quality', 'print'],
                    difficulty: 'hard'
                },
                {
                    question: 'DataFrame dfì—ì„œ "quality"ê°€ 8 ì´ìƒì´ê³  "pH"ê°€ 3 ì´ìƒì¸ ë°ì´í„°ë¥¼ ì„ íƒí•˜ì—¬ ì¶œë ¥í•˜ì„¸ìš”.',
                    example: 'result = df[(df["A"] > 5) & (df["B"] < 10)]\nprint(result)',
                    hint: 'ì—¬ëŸ¬ ì¡°ê±´ì„ ê²°í•©í•  ë•ŒëŠ” & ì—°ì‚°ìë¥¼ ì‚¬ìš©í•˜ê³ , ê° ì¡°ê±´ì„ ê´„í˜¸ë¡œ ë¬¶ìŠµë‹ˆë‹¤.',
                    expectedOutput: 'quality >= 8ì´ê³  pH >= 3ì¸ ë°ì´í„°',
                    keywords: ['df', '[', 'quality', '>=', '8', '&', 'pH', '>=', '3', ']', 'print'],
                    difficulty: 'hard'
                },
                {
                    question: 'DataFrame dfì˜ ê¸°ë³¸ ì •ë³´(info)ë¥¼ ì¶œë ¥í•˜ì„¸ìš”. ì—´ ì´ë¦„, ë°ì´í„° íƒ€ì…, ê²°ì¸¡ì¹˜ ê°œìˆ˜ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
                    example: 'import pandas as pd\ndf = pd.read_csv("file.csv")\ndf.info()',
                    hint: '.info() ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ë©´ DataFrameì˜ ì „ë°˜ì ì¸ ì •ë³´ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
                    expectedOutput: 'DataFrame ì •ë³´',
                    keywords: ['df', '.', 'info', '(', ')'],
                    difficulty: 'easy'
                },
                {
                    question: 'DataFrame dfì˜ í†µê³„ ìš”ì•½ ì •ë³´(í‰ê· , í‘œì¤€í¸ì°¨ ë“±)ë¥¼ ì¶œë ¥í•˜ì„¸ìš”.',
                    example: 'import pandas as pd\ndf = pd.read_csv("file.csv")\nprint(df.describe())',
                    hint: '.describe() ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ë©´ ìˆ˜ì¹˜í˜• ì—´ì˜ í†µê³„ ì •ë³´ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
                    expectedOutput: 'í†µê³„ ìš”ì•½ ì •ë³´',
                    keywords: ['df', '.', 'describe', '(', ')', 'print'],
                    difficulty: 'easy'
                },
                {
                    question: 'DataFrame dfì˜ ì—´ ì´ë¦„ ëª©ë¡ì„ ì¶œë ¥í•˜ì„¸ìš”.',
                    example: 'print(df.columns)',
                    hint: '.columns ì†ì„±ì„ ì‚¬ìš©í•˜ë©´ DataFrameì˜ ëª¨ë“  ì—´ ì´ë¦„ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
                    expectedOutput: 'ì—´ ì´ë¦„ ëª©ë¡',
                    keywords: ['df', '.', 'columns', 'print'],
                    difficulty: 'easy'
                },
                {
                    question: 'CSV íŒŒì¼ì„ ì½ì„ ë•Œ ì²« ë²ˆì§¸ ì—´ì„ ì¸ë±ìŠ¤ë¡œ ì„¤ì •í•˜ì—¬ ë¶ˆëŸ¬ì˜¤ì„¸ìš”. (index_col=0 ì‚¬ìš©)',
                    example: 'import pandas as pd\ndf = pd.read_csv("file.csv", index_col=0)\nprint(df.head())',
                    hint: 'read_csv()ì˜ index_col ë§¤ê°œë³€ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ íŠ¹ì • ì—´ì„ ì¸ë±ìŠ¤ë¡œ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
                    expectedOutput: 'ì²« ë²ˆì§¸ ì—´ì´ ì¸ë±ìŠ¤ì¸ DataFrame',
                    keywords: ['import', 'pandas', 'read_csv', 'index_col', '=', '0', 'print'],
                    difficulty: 'medium'
                }
            ],
            'operations': [
                {
                    question: '5 + 3 * 2ì˜ ê²°ê³¼ë¥¼ ì¶œë ¥í•˜ì„¸ìš”.',
                    example: 'print(2 + 3)  # 5',
                    hint: 'ì—°ì‚°ì ìš°ì„ ìˆœìœ„ë¥¼ ê³ ë ¤í•˜ì„¸ìš”. ê³±ì…ˆì´ ë¨¼ì € ê³„ì‚°ë©ë‹ˆë‹¤.',
                    expectedOutput: '11',
                    keywords: ['5', '+', '3', '*', '2', 'print'],
                    difficulty: 'easy'
                },
                {
                    question: '10ì„ 3ìœ¼ë¡œ ë‚˜ëˆˆ ëª«ê³¼ ë‚˜ë¨¸ì§€ë¥¼ ê°ê° ì¶œë ¥í•˜ì„¸ìš”.',
                    example: 'print(7 // 2)  # 3 (ëª«)\nprint(7 % 2)   # 1 (ë‚˜ë¨¸ì§€)',
                    hint: '// ì—°ì‚°ìëŠ” ëª«, % ì—°ì‚°ìëŠ” ë‚˜ë¨¸ì§€ë¥¼ êµ¬í•©ë‹ˆë‹¤.',
                    expectedOutput: '3\n1',
                    keywords: ['10', '//', '3', '%', 'print'],
                    difficulty: 'medium'
                },
                {
                    question: '2ì˜ 10ìŠ¹ì„ ê³„ì‚°í•˜ì—¬ ì¶œë ¥í•˜ì„¸ìš”.',
                    example: 'print(2 ** 3)  # 8',
                    hint: '** ì—°ì‚°ìë¥¼ ì‚¬ìš©í•˜ì—¬ ê±°ë“­ì œê³±ì„ ê³„ì‚°í•©ë‹ˆë‹¤.',
                    expectedOutput: '1024',
                    keywords: ['2', '**', '10', 'print'],
                    difficulty: 'easy'
                },
                {
                    question: '(10 + 5) * 3 - 8 / 2ì˜ ê²°ê³¼ë¥¼ ì¶œë ¥í•˜ì„¸ìš”.',
                    example: 'print((2 + 3) * 4)  # 20',
                    hint: 'ê´„í˜¸ ì•ˆì„ ë¨¼ì € ê³„ì‚°í•˜ê³ , ê³±ì…ˆê³¼ ë‚˜ëˆ—ì…ˆ, ê·¸ ë‹¤ìŒ ë§ì…ˆê³¼ ëº„ì…ˆ ìˆœì„œì…ë‹ˆë‹¤.',
                    expectedOutput: '41.0',
                    keywords: ['(', '10', '+', '5', ')', '*', '3', '-', '8', '/', '2', 'print'],
                    difficulty: 'medium'
                }
            ]
        };

        // ê²Œì„ ìƒíƒœ
        let gameState = {
            currentTopic: 'datatypes',
            currentQuestion: 0,
            score: 0,
            solved: 0,
            streak: 0,
            level: 1,
            totalQuestions: 0,
            studentName: '',
            studentId: '',
            topicProgress: {},
            history: []
        };

        // LocalStorage í‚¤
        const STORAGE_KEY = 'python_learning_progress';
        const STUDENT_KEY = 'python_learning_student';

        // ë°ì´í„° ì €ì¥
        function saveProgress() {
            const saveData = {
                score: gameState.score,
                solved: gameState.solved,
                streak: gameState.streak,
                level: gameState.level,
                topicProgress: gameState.topicProgress,
                history: gameState.history,
                lastSaved: new Date().toISOString()
            };
            localStorage.setItem(STORAGE_KEY, JSON.stringify(saveData));
            console.log('ì§„í–‰ ìƒí™© ì €ì¥ë¨:', saveData);
        }

        // ë°ì´í„° ë¡œë“œ
        function loadProgress() {
            const saved = localStorage.getItem(STORAGE_KEY);
            if (saved) {
                const data = JSON.parse(saved);
                gameState.score = data.score || 0;
                gameState.solved = data.solved || 0;
                gameState.streak = data.streak || 0;
                gameState.level = data.level || 1;
                gameState.topicProgress = data.topicProgress || {};
                gameState.history = data.history || [];
                console.log('ì§„í–‰ ìƒí™© ë¡œë“œë¨:', data);
                return true;
            }
            return false;
        }

        // í•™ìƒ ì •ë³´ ì €ì¥
        function saveStudentInfo() {
            const name = document.getElementById('name-input').value.trim();
            const id = document.getElementById('id-input').value.trim();
            
            if (!name || !id) {
                alert('ì´ë¦„ê³¼ í•™ë²ˆì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”!');
                return;
            }

            const studentData = {
                name: name,
                id: id,
                registeredAt: new Date().toISOString()
            };
            
            localStorage.setItem(STUDENT_KEY, JSON.stringify(studentData));
            gameState.studentName = name;
            gameState.studentId = id;
            
            updateStudentDisplay();
            closeNameModal();
            
            showAchievement('ë“±ë¡ ì™„ë£Œ! ğŸ‰', `${name}ë‹˜, í•™ìŠµì„ ì‹œì‘í•©ë‹ˆë‹¤!`);
        }

        // í•™ìƒ ì •ë³´ ë¡œë“œ
        function loadStudentInfo() {
            const saved = localStorage.getItem(STUDENT_KEY);
            if (saved) {
                const data = JSON.parse(saved);
                gameState.studentName = data.name;
                gameState.studentId = data.id;
                updateStudentDisplay();
                return true;
            }
            return false;
        }

        // í•™ìƒ ì •ë³´ í‘œì‹œ ì—…ë°ì´íŠ¸
        function updateStudentDisplay() {
            document.getElementById('student-name').textContent = gameState.studentName || 'í™˜ì˜í•©ë‹ˆë‹¤!';
            document.getElementById('student-id').textContent = gameState.studentId ? `í•™ë²ˆ: ${gameState.studentId}` : 'í•™ë²ˆ: ë¯¸ë“±ë¡';
        }

        // í•™ìƒ ì •ë³´ ë³€ê²½
        function changeStudentInfo() {
            document.getElementById('name-input').value = gameState.studentName || '';
            document.getElementById('id-input').value = gameState.studentId || '';
            document.getElementById('name-modal').classList.add('show');
            document.getElementById('name-overlay').classList.add('show');
        }

        // ì´ë¦„ ëª¨ë‹¬ ë‹«ê¸°
        function closeNameModal() {
            document.getElementById('name-modal').classList.remove('show');
            document.getElementById('name-overlay').classList.remove('show');
        }

        // í•™ìŠµ ê¸°ë¡ ì¶”ê°€
        function addToHistory(topic, question, solved) {
            const historyItem = {
                topic: topic,
                question: question,
                solved: solved,
                timestamp: new Date().toISOString(),
                score: gameState.score
            };
            
            gameState.history.unshift(historyItem);
            
            // ìµœê·¼ 50ê°œë§Œ ìœ ì§€
            if (gameState.history.length > 50) {
                gameState.history = gameState.history.slice(0, 50);
            }
            
            saveProgress();
            updateHistoryDisplay();
        }

        // ì£¼ì œë³„ ì§„í–‰ë¥  ì—…ë°ì´íŠ¸
        function updateTopicProgress(topic, solved) {
            if (!gameState.topicProgress[topic]) {
                gameState.topicProgress[topic] = {
                    solved: 0,
                    total: questions[topic].length
                };
            }
            
            if (solved) {
                gameState.topicProgress[topic].solved++;
            }
            
            saveProgress();
            updateTopicProgressDisplay();
        }

        // ì£¼ì œë³„ ì§„í–‰ë¥  í‘œì‹œ ì—…ë°ì´íŠ¸
        function updateTopicProgressDisplay() {
            const container = document.getElementById('topic-progress');
            container.innerHTML = '';
            
            const topicNames = {
                'datatypes': 'ìë£Œí˜•',
                'numpy': 'Numpy',
                'pandas': 'Pandas',
                'data_loading': 'ğŸ“‚ ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸°',
                'operations': 'ì—°ì‚°'
            };
            
            for (let topic in questions) {
                const progress = gameState.topicProgress[topic] || {
                    solved: 0,
                    total: questions[topic].length
                };
                
                const percentage = (progress.solved / progress.total) * 100;
                
                const div = document.createElement('div');
                div.className = 'topic-progress';
                div.innerHTML = `
                    <strong>${topicNames[topic]}</strong>
                    <div style="margin: 10px 0;">${progress.solved} / ${progress.total} ë¬¸ì œ</div>
                    <div class="topic-progress-bar">
                        <div class="topic-progress-fill" style="width: ${percentage}%"></div>
                    </div>
                    <div style="margin-top: 5px; color: #667eea; font-weight: bold;">${Math.round(percentage)}%</div>
                `;
                container.appendChild(div);
            }
        }

        // í•™ìŠµ ê¸°ë¡ í‘œì‹œ ì—…ë°ì´íŠ¸
        function updateHistoryDisplay() {
            const container = document.getElementById('history-list');
            container.innerHTML = '';
            
            if (gameState.history.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: #999; padding: 20px;">ì•„ì§ í•™ìŠµ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤.</p>';
                return;
            }
            
            const topicNames = {
                'datatypes': 'ìë£Œí˜•',
                'numpy': 'Numpy',
                'pandas': 'Pandas',
                'data_loading': 'ğŸ“‚ ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸°',
                'operations': 'ì—°ì‚°'
            };
            
            // ìµœê·¼ 10ê°œë§Œ í‘œì‹œ
            gameState.history.slice(0, 10).forEach(item => {
                const date = new Date(item.timestamp);
                const dateStr = `${date.getMonth() + 1}/${date.getDate()} ${date.getHours()}:${String(date.getMinutes()).padStart(2, '0')}`;
                
                const div = document.createElement('div');
                div.className = `history-item ${item.solved ? 'solved' : ''}`;
                div.innerHTML = `
                    <div>
                        <strong>${topicNames[item.topic]}</strong> - ë¬¸ì œ ${item.question + 1}
                        <div class="history-date">${dateStr}</div>
                    </div>
                    <div style="text-align: right;">
                        ${item.solved ? 'âœ… ì •ë‹µ' : 'âŒ ì˜¤ë‹µ'}
                        <div style="color: #667eea; font-weight: bold;">ì´ì : ${item.score}</div>
                    </div>
                `;
                container.appendChild(div);
            });
        }

        // ì§„í–‰ ìƒí™© ì´ˆê¸°í™”
        function resetProgress() {
            if (confirm('ì •ë§ë¡œ ëª¨ë“  ì§„í–‰ ìƒí™©ì„ ì´ˆê¸°í™”í•˜ì‹œê² ìŠµë‹ˆê¹Œ?\nì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.')) {
                if (confirm('í•™ìƒ ì •ë³´ëŠ” ìœ ì§€í•˜ê³  ì§„í–‰ ìƒí™©ë§Œ ì´ˆê¸°í™”í• ê¹Œìš”?\n\ní™•ì¸ = í•™ìƒ ì •ë³´ ìœ ì§€\nì·¨ì†Œ = ëª¨ë‘ ì´ˆê¸°í™”')) {
                    // ì§„í–‰ ìƒí™©ë§Œ ì´ˆê¸°í™”
                    localStorage.removeItem(STORAGE_KEY);
                } else {
                    // ëª¨ë‘ ì´ˆê¸°í™”
                    localStorage.removeItem(STORAGE_KEY);
                    localStorage.removeItem(STUDENT_KEY);
                    gameState.studentName = '';
                    gameState.studentId = '';
                }
                
                gameState.score = 0;
                gameState.solved = 0;
                gameState.streak = 0;
                gameState.level = 1;
                gameState.topicProgress = {};
                gameState.history = [];
                
                updateStats();
                updateStudentDisplay();
                updateTopicProgressDisplay();
                updateHistoryDisplay();
                
                alert('ì´ˆê¸°í™”ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!');
                
                if (!gameState.studentName) {
                    showNameModal();
                }
            }
        }

        // ì´ë¦„ ëª¨ë‹¬ í‘œì‹œ
        function showNameModal() {
            document.getElementById('name-modal').classList.add('show');
            document.getElementById('name-overlay').classList.add('show');
        }

        // ì´ ë¬¸ì œ ìˆ˜ ê³„ì‚°
        function calculateTotalQuestions() {
            let total = 0;
            for (let topic in questions) {
                total += questions[topic].length;
            }
            return total;
        }

        gameState.totalQuestions = calculateTotalQuestions();

        // í†µê³„ ì—…ë°ì´íŠ¸
        function updateStats() {
            document.getElementById('score').textContent = gameState.score;
            document.getElementById('solved').textContent = gameState.solved;
            document.getElementById('streak').textContent = gameState.streak;
            document.getElementById('level').textContent = gameState.level;
            
            const progress = (gameState.solved / gameState.totalQuestions) * 100;
            const progressBar = document.getElementById('progress');
            progressBar.style.width = progress + '%';
            progressBar.textContent = Math.round(progress) + '%';
        }

        // ì£¼ì œ ë¡œë“œ
        function loadTopic(topic) {
            gameState.currentTopic = topic;
            gameState.currentQuestion = 0;
            
            // ëª¨ë“  ë²„íŠ¼ì˜ active í´ë˜ìŠ¤ ì œê±°
            document.querySelectorAll('.topic-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // í´ë¦­ëœ ë²„íŠ¼ì— active í´ë˜ìŠ¤ ì¶”ê°€
            event.target.classList.add('active');
            
            loadQuestion();
        }

        // ë¬¸ì œ ë¡œë“œ
        function loadQuestion() {
            const topic = gameState.currentTopic;
            const qIndex = gameState.currentQuestion;
            
            if (qIndex >= questions[topic].length) {
                gameState.currentQuestion = 0;
                loadQuestion();
                return;
            }
            
            const q = questions[topic][qIndex];
            
            // ë‚œì´ë„ ë°°ì§€ ì¶”ê°€
            const difficultyBadge = `<span class="difficulty-badge difficulty-${q.difficulty}">${q.difficulty === 'easy' ? 'ì‰¬ì›€' : q.difficulty === 'medium' ? 'ë³´í†µ' : 'ì–´ë ¤ì›€'}</span>`;
            
            document.getElementById('question').innerHTML = q.question + difficultyBadge;
            document.getElementById('example-code').textContent = q.example;
            document.getElementById('hint').textContent = q.hint;
            document.getElementById('hint').classList.remove('show');
            document.getElementById('feedback').classList.remove('show');
            document.getElementById('expected-output').textContent = 'ì •ë‹µì„ í™•ì¸í•˜ë©´ ì˜ˆìƒ ì¶œë ¥ì´ í‘œì‹œë©ë‹ˆë‹¤...';
        }

        // íŒíŠ¸ í‘œì‹œ
        function showHint() {
            document.getElementById('hint').classList.add('show');
        }

        // ë‹¤ìŒ ë¬¸ì œ
        function nextQuestion() {
            gameState.currentQuestion++;
            loadQuestion();
        }

        // ì½”ë“œ ì§€ìš°ê¸°
        function clearCode() {
            if (confirm('ì‘ì„±í•œ ì½”ë“œë¥¼ ëª¨ë‘ ì§€ìš°ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                document.getElementById('code-input').value = '';
            }
        }

        // ì •ë‹µ í™•ì¸
        function checkAnswer() {
            const code = document.getElementById('code-input').value.trim();
            
            if (!code) {
                alert('ì½”ë“œë¥¼ ì‘ì„±í•´ì£¼ì„¸ìš”!');
                return;
            }
            
            const topic = gameState.currentTopic;
            const qIndex = gameState.currentQuestion;
            const q = questions[topic][qIndex];
            
            // í‚¤ì›Œë“œ ì²´í¬
            let keywordsFound = 0;
            q.keywords.forEach(keyword => {
                if (code.includes(keyword)) {
                    keywordsFound++;
                }
            });
            
            const keywordRatio = keywordsFound / q.keywords.length;
            
            // ì ìˆ˜ ê³„ì‚° (ë‚œì´ë„ë³„)
            let points = 100;
            if (q.difficulty === 'medium') points = 150;
            if (q.difficulty === 'hard') points = 200;
            
            const feedback = document.getElementById('feedback');
            const expectedOutput = document.getElementById('expected-output');
            
            // ì •ë‹µ íŒì • (70% ì´ìƒì˜ í‚¤ì›Œë“œ í¬í•¨)
            if (keywordRatio >= 0.7) {
                gameState.score += points;
                gameState.solved++;
                gameState.streak++;
                
                // í•™ìŠµ ê¸°ë¡ ì¶”ê°€
                addToHistory(topic, qIndex, true);
                updateTopicProgress(topic, true);
                
                // ë ˆë²¨ì—… ì²´í¬
                if (gameState.score >= gameState.level * 500) {
                    gameState.level++;
                    showAchievement('ë ˆë²¨ì—…! ğŸ‰', `ë ˆë²¨ ${gameState.level}ì— ë„ë‹¬í–ˆìŠµë‹ˆë‹¤!`);
                }
                
                feedback.textContent = `âœ… ì •ë‹µì…ë‹ˆë‹¤! +${points}ì  (ì—°ì† ${gameState.streak}ë¬¸ì œ)`;
                feedback.className = 'feedback success show';
                expectedOutput.textContent = `ì˜ˆìƒ ì¶œë ¥:\n${q.expectedOutput}`;
                expectedOutput.style.color = '#4ec9b0';
                
                updateStats();
                saveProgress();
                
                // 3ì´ˆ í›„ ë‹¤ìŒ ë¬¸ì œë¡œ
                setTimeout(nextQuestion, 3000);
            } else {
                gameState.streak = 0;
                
                // ì˜¤ë‹µë„ ê¸°ë¡
                addToHistory(topic, qIndex, false);
                
                feedback.textContent = `âŒ ë‹¤ì‹œ ì‹œë„í•´ë³´ì„¸ìš”! í•„ìš”í•œ ì½”ë“œ: ${Math.round(keywordRatio * 100)}% / 70%\nğŸ’¡ íŒíŠ¸ ë²„íŠ¼ì„ ëˆŒëŸ¬ë³´ì„¸ìš”!`;
                feedback.className = 'feedback error show';
                updateStats();
                saveProgress();
            }
        }

        // ì„±ì·¨ íŒì—… í‘œì‹œ
        function showAchievement(title, desc) {
            document.getElementById('achievement-text').textContent = title;
            document.getElementById('achievement-desc').textContent = desc;
            document.getElementById('achievement').classList.add('show');
            document.getElementById('overlay').classList.add('show');
        }

        // ì„±ì·¨ íŒì—… ë‹«ê¸°
        function closeAchievement() {
            document.getElementById('achievement').classList.remove('show');
            document.getElementById('overlay').classList.remove('show');
        }

        // ì´ˆê¸°í™”
        window.onload = function() {
            // ì €ì¥ëœ í•™ìƒ ì •ë³´ ë¡œë“œ
            const hasStudentInfo = loadStudentInfo();
            
            // ì €ì¥ëœ ì§„í–‰ ìƒí™© ë¡œë“œ
            const hasProgress = loadProgress();
            
            // í•™ìƒ ì •ë³´ê°€ ì—†ìœ¼ë©´ ì…ë ¥ ëª¨ë‹¬ í‘œì‹œ
            if (!hasStudentInfo) {
                setTimeout(() => {
                    showNameModal();
                }, 500);
            }
            
            loadQuestion();
            updateStats();
            updateTopicProgressDisplay();
            updateHistoryDisplay();
            
            // ìë™ ì €ì¥ (1ë¶„ë§ˆë‹¤)
            setInterval(() => {
                saveProgress();
                console.log('ìë™ ì €ì¥ ì™„ë£Œ');
            }, 60000);
        };

        // Enter í‚¤ë¡œ ì •ë‹µ í™•ì¸
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('code-input').addEventListener('keydown', function(e) {
                if (e.ctrlKey && e.key === 'Enter') {
                    checkAnswer();
                }
            });
        });
    </script>
</body>
</html>
